# Cosmo Router Timeout Configuration

This gateway uses a dual-configuration approach for clean separation of concerns:

1. **`config.json`** - Execution configuration (generated by wgc)
   - Contains schema definitions and routing information
   - Generated by running `./generate-config.sh`
   - Should NOT be manually edited

2. **`config.yaml`** - Runtime configuration (user-defined)
   - Contains router behavior settings including timeouts
   - Version controlled and manually maintained
   - Service-specific timeout overrides

## Current Timeout Configuration

- **Claude Service**: 1500s (25 minutes)
  - Required for long-running Claude CLI operations
  - Especially needed for `generateCommitMessages` mutations
  
- **Git Service**: 60s (default)
  - Sufficient for all git operations
  
- **GitHub Adapter**: 60s (default)
  - Sufficient for GitHub API calls

## Regenerating Configuration

When subgraph schemas change:
```bash
./generate-config.sh
pm2 restart gateway
```

## Modifying Timeouts

Edit `config.yaml` and adjust the `traffic_shaping` section:
```yaml
traffic_shaping:
  subgraphs:
    claude-service:
      request_timeout: 1500s  # Adjust as needed
```

Then restart the gateway:
```bash
pm2 restart gateway
```

## Troubleshooting

Check gateway logs:
```bash
pm2 logs gateway --lines 50
```

Verify configuration is loaded:
```bash
curl http://localhost:4000/health
```